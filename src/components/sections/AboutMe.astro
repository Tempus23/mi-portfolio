---
import cvDataEn from "@/data/cv_data.json";
import cvDataEs from "@/data/cv_data_es.json";

// Default to English for server-side rendering
const { about_me } = cvDataEn;
---

<article
  class="flex flex-col items-center justify-center gap-8 text-gray-700 dark:text-gray-300"
>
  <div
    id="about-me-content"
    class="[&>p]:mb-6 [&>p]:text-lg [&>p]:leading-relaxed [&>p>strong]:text-blue-600 dark:[&>p>strong]:text-blue-400 [&>p>strong]:font-semibold text-pretty"
  >
    {
      about_me.description_paragraphs.map((paragraph) => (
        <p data-about-paragraph />
      ))
    }
  </div>

  <div class="w-full border-t border-gray-200 dark:border-gray-700 pt-6">
    <h3
      class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100"
      data-i18n="aboutMe.keyValues"
    >
      Key Values
    </h3>
    <div id="about-me-attributes" class="grid grid-cols-2 md:grid-cols-3 gap-3">
      {
        about_me.attributes.map((attribute) => (
          <div class="flex items-center gap-2 text-gray-700 dark:text-gray-300">
            <span class="text-green-500">‚úì</span>
            <span data-attribute>{attribute}</span>
          </div>
        ))
      }
    </div>
  </div>
</article>

<script define:vars={{ cvDataEn, cvDataEs }}>
  import { getLanguage } from "@/utils/languageStore";

  function formatParagraph(paragraph) {
    let formattedParagraph = paragraph;
    const boldKeywords = [
      "Artificial Intelligence",
      "Machine Learning",
      "Deep Learning",
      "AI agents",
      "backend",
      "technical leadership",
      "international experience",
      "Inteligencia Artificial",
      "Aprendizaje Autom√°tico",
      "Deep Learning",
      "agentes de IA",
      "backend",
      "liderazgo t√©cnico",
      "experiencia internacional",
    ];
    boldKeywords.forEach((keyword) => {
      const regex = new RegExp(keyword, "gi");
      formattedParagraph = formattedParagraph.replace(
        regex,
        `<strong>${keyword}</strong>`
      );
    });
    return formattedParagraph;
  }

  function updateAboutMeContent() {
    const lang = getLanguage();
    const cvData = lang === "es" ? cvDataEs : cvDataEn;
    const { about_me } = cvData;

    // Update paragraphs
    const paragraphs = document.querySelectorAll("[data-about-paragraph]");
    paragraphs.forEach((p, index) => {
      if (index < about_me.description_paragraphs.length) {
        p.innerHTML = formatParagraph(about_me.description_paragraphs[index]);
      }
    });

    // Update attributes
    const attributesContainer = document.getElementById("about-me-attributes");
    if (attributesContainer) {
      attributesContainer.innerHTML = about_me.attributes
        .map(
          (attribute) => `
        <div class="flex items-center gap-2 text-gray-700 dark:text-gray-300">
          <span class="text-green-500">‚úì</span>
          <span data-attribute>${attribute}</span>
        </div>
      `
        )
        .join("");
    }
  }

  // Update on page load
  document.addEventListener("astro:page-load", updateAboutMeContent);

  // Update when language changes
  window.addEventListener("languagechange", updateAboutMeContent);
</script>

<!-- FRASES PROHIBIDAS EN VUESTRO PORTFOLIO

<p>
  Mi sue√±o es encontrar mi primer empleo en el mundo de la programaci√≥n. Una empresa donde pueda seguir aprendiendo. ‚ùå
</p>

<p>
  ‚ùå Apasionado de la programaci√≥n desde chekitito. Me encantan los ordenadores y crear p√°ginas web buenas y r√°pidas con la √∫ltima tecnolog√≠a.
</p>

<p>
  Trabajo bien en equipo. Siempre estoy aprendiendo cosas nuevas.
</p>

-------------------------------------

--------------------------------------

<p>
  ¬°Soy Leo! Estudi√© Derecho Empresarial y, tras a√±os ejerciendo, me pas√© al mundo de la Programaci√≥n. Desde entonces disfruto creando experiencias web para los usuarios.
</p>

<p>
  Entre mis √©xitos destaco que durante el Grado Superior, ayud√© a mis compa√±eros a aprender sobre TDD. Me encanta el testing, creo en su importancia, y me gusta compartir mi conocimiento sobre ello.
</p>

<p>
  Cuento con experiencia desarrollando aplicaciones m√≥viles, y he creado una iniciativa llamada X para mezclar mis dos pasiones: la programaci√≥n y el derecho. Ayudando a la sociedad a acceso a una defensa justa.
</p>

---------------------------------------

<p>Me llamo Sara, tengo 25 a√±os y soy de Santiago, Chile üá®üá±. Termin√© mis estudios como Desarrolladora Web. Me encanta enfocarme en la parte del rendimiento, para ofrecer la mejora experiencia al usuario.</p>

<p>
  Colaboro en la organizaci√≥n del MeetUp local BeerJS donde reunimos a desarrolladores de Santiago para compartir conocimiento y experiencias. El a√±o 2023 hicimos un total de 25 charlas con m√°s de 2000 asistentes.
</p>

<p>
  Adem√°s de participar activamente en la comunidad, he participado en la Hackathon de Midudev quedando en 3er puesto con mi proyecto _Chatty_, donde usando IA pod√≠as interactuar con un PDF. ¬°√âchale un vistazo!
</p>

-->
